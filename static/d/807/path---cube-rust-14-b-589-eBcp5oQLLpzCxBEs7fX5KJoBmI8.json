{"data":{"markdownRemark":{"html":"<h1>按照nightly版的component</h1>\n<p>rustup component add {{component}} --toolchain nightly</p>\n<h1>如何通过配置文件设置给定crate的toolchain version</h1>\n<p>新增rust-toolchain文件\n内容写死期望的工具链</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">nightly-2019-04-19</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><a href=\"https://github.com/rust-lang/rustup.rs#toolchain-specification\">文档</a></p>\n<h1>安装rust</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">https://win.rustup.rs/x86_64</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1>离线安装</h1>\n<p>必须用cmd 不能用powershell\n<a href=\"https://docs.microsoft.com/en-us/visualstudio/install/workload-component-id-vs-build-tools?view=vs-2017\">component-id</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">.\\vs_community__1600658420.1558275487.exe ^\n--layout C:\\Users\\developer\\Desktop\\ci\\vs ^\n--add Microsoft.VisualStudio.Workload.NativeDesktop ^\n--add Microsoft.VisualStudio.Component.CoreEditor ^\n--add Microsoft.VisualStudio.Component.StartPageExperiment.Cpp ^\n--add Microsoft.Component.MSBuild ^\n--add Microsoft.VisualStudio.Component.Roslyn.Compiler ^\n--add Microsoft.VisualStudio.Component.TextTemplating ^\n--add Microsoft.VisualStudio.Component.VC.CoreIde ^\n--add Microsoft.VisualStudio.Component.VC.Redist.14.Latest  ^\n--add Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Core   ^\n--add Microsoft.VisualStudio.Component.NuGet  ^\n--add Microsoft.VisualStudio.Component.Windows10SDK.17763 ^\n--add Microsoft.VisualStudio.Component.VC.ATL  ^\n--add Microsoft.VisualStudio.Component.VC.Tools.x86.x64  ^\n--add Microsoft.VisualStudio.Component.VC.ATLMFC ^\n--includeRecommended ^\n--lang en-US</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>国内源</h1>\n<p>touch $HOME/.cargo/config\n[registry]\nindex = \"<a href=\"http://mirrors.ustc.edu.cn/crates.io-index\">http://mirrors.ustc.edu.cn/crates.io-index</a>\"</p>\n<h1>静态编译</h1>\n<div class=\"gatsby-highlight\" data-language=\"bat\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bat line-numbers\"><code class=\"language-bat\">set RUSTFLAGS=-C target-feature=+crt-static\nexport RUSTFLAGS=&#39;-C target-feature=+crt-static&#39;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h2>windows xp</h2>\n<div class=\"gatsby-highlight\" data-language=\"bat\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bat line-numbers\"><code class=\"language-bat\">set RUSTFLAGS=-C target-feature=+crt-static  -C link-arg=/SUBSYSTEM:CONSOLE,5.01</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1>FFI</h1>\n<ol>\n<li>\n<p>String => * const c_char</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-rust line-numbers\"><code class=\"language-rust\"><span class=\"token function\">CString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"xxxx\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">as_ptr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<ul>\n<li>const c_char => String</li>\n</ul>\n</li>\n</ol>"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/cube/rust/"}}