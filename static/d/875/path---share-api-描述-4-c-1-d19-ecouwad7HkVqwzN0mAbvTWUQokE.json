{"data":{"markdownRemark":{"html":"<p>本文尝试总结api(restful api)描述文件的一些要素.以此来指出从这种api描述文件中直接生成代码所依赖的要素有那些.同时还会介绍<a href=\"https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md\">openApi 3.0</a>中对这些要素的具体说明,以及如何用ts实现一个简单但足够实用的openapi code generator.</p>\n<h2>对路由的描述</h2>\n<ol>\n<li>路由描述 method url parameter query body response</li>\n<li>\n<p>注释 上述每个都可以有注释</p>\n<h3>描述参数</h3>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yml line-numbers\"><code class=\"language-yml\"><span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n/users/<span class=\"token punctuation\">{</span>userId<span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span>\n<span class=\"token key atrule\">get</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">summary</span><span class=\"token punctuation\">:</span> Get a user by ID\n  <span class=\"token key atrule\">parameters</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">in</span><span class=\"token punctuation\">:</span> path\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> userId\n      <span class=\"token key atrule\">schema</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> integer\n      <span class=\"token key atrule\">required</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n      <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> Numeric ID of the user to get</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>option field and default value</h3>\n<p>默认所有的field都是optional的只有特意指定了required之后才是require的,object下面的可以指定required的列表</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yml line-numbers\"><code class=\"language-yml\"><span class=\"token key atrule\">components</span><span class=\"token punctuation\">:</span>\n<span class=\"token key atrule\">schemas</span><span class=\"token punctuation\">:</span>\n<span class=\"token key atrule\">CreatePeriodBody</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> object\n  <span class=\"token key atrule\">required</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> name\n    <span class=\"token punctuation\">-</span> time_range\n  <span class=\"token key atrule\">properties</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> string\n    <span class=\"token key atrule\">time_range</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> object\n      <span class=\"token key atrule\">required</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> start_at\n        <span class=\"token punctuation\">-</span> end_at\n      <span class=\"token key atrule\">properties</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">start_at</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> number\n        <span class=\"token key atrule\">end_at</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> number</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>object/nested object</h2>\n</li>\n</ol>\n<h2>enum</h2>\n<p>openApi支持枚举 但是只支持string enum不支持 integer enum,看起来有一堆<a href=\"https://github.com/OAI/OpenAPI-Specification/issues/681\">PR</a></p>\n<h2>field/object restricted</h2>\n<h2>name style cast</h2>\n<h2>custom information</h2>\n<p>使用<code class=\"language-text\">x-</code>开头的标记\n<a href=\"https://swagger.io/docs/specification/openapi-extensions/\">OpenAPI Extensions\n</a></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"></span></pre></div>","fields":{"slug":"/share/api-描述/","disqus":{"shortname":"woodgear-blog"}},"frontmatter":{"id":"084cc3","time":"2020-11-10T09:52:11+08:00","tag":null},"parent":{"__typename":"File","name":"api-描述","ext":".md","birthTime":"1970-01-01T00:00:00.000Z","changeTime":"2020-11-26T15:05:48.114Z","relativeDirectory":"share","absolutePath":"/home/oaa/sm/ns/share/blog/share/api-描述.md"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/share/api-描述/","disqus":{"shortname":"woodgear-blog"}}}