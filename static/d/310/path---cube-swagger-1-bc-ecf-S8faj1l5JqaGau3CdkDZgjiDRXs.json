{"data":{"markdownRemark":{"html":"<h1>what it is</h1>\n<p>通过协议指定接口 之后我们就可以自动生成client与server swagger就是这样的一个协议 其描述了restful风格的协议</p>\n<h1>concept</h1>\n<p><a href=\"https://swagger.io/specification/\">swagger</a> 描述restful的一套规范</p>\n<h1>tags 代表什么?</h1>\n<h1>schemas 代表什么</h1>\n<p>看起来\t代表请求的数据约束 和返回的数据约束 类似类型的感觉\n<a href=\"https://swagger.io/docs/specification/data-models/\">Data Models</a></p>\n<h1>security 代表什么</h1>\n<h1>如何生成 server  client代码 (falsk server js 代码举例)</h1>\n<h1>如何标识 方法名 路径 参数 header 压缩方式 期望的返回值 压缩方式</h1>\n<p>实际上每一个都映射到 yaml中了\n本质上讲swagger的协议是无所谓的 问题是swagger的codegen的实现</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">openapi</span><span class=\"token punctuation\">:</span> 3.0.1\n<span class=\"token key atrule\">info</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> vocabulary hunder \n  <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'This is a api of vocabulary hunder use by all client and server'</span>\n  <span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> 0.0.1\n<span class=\"token key atrule\">servers</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span><span class=\"token number\">5000</span>\n  <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> local dev server\n\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//vocabularyhunter.com\n  <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> product server\n<span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">/api/vh/hunter</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">post</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span> \n      <span class=\"token punctuation\">-</span> server\n      <span class=\"token key atrule\">summary</span><span class=\"token punctuation\">:</span> 给定一篇文章 获取其中的生词\n      <span class=\"token key atrule\">parameters</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">in</span><span class=\"token punctuation\">:</span> header\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> id\n          <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> 用户id\n          <span class=\"token key atrule\">schema</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> string\n          <span class=\"token key atrule\">required</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n      <span class=\"token key atrule\">requestBody</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> body是json 含有 article 属性\n        <span class=\"token key atrule\">content</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">application/json</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">schema</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> object\n              <span class=\"token key atrule\">properties</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">article</span><span class=\"token punctuation\">:</span>\n                  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> string\n              <span class=\"token key atrule\">example</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">article</span><span class=\"token punctuation\">:</span> \"Those who do not understand Unix are condemned to reinvent it<span class=\"token punctuation\">,</span> poorly.\n– Henry Spencer<span class=\"token punctuation\">,</span> Usenet signature<span class=\"token punctuation\">,</span> November 1987\n\"\n        <span class=\"token key atrule\">required</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        \n      <span class=\"token key atrule\">responses</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">'200'</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"正确的获取了未知单词列表\"</span>\n          <span class=\"token key atrule\">content</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">application/json</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">schema</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> array\n                <span class=\"token key atrule\">items</span><span class=\"token punctuation\">:</span> \n                  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> string\n                <span class=\"token key atrule\">example</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"condemned\"</span><span class=\"token punctuation\">]</span>\n        <span class=\"token key atrule\">default</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> 嗯 总之就是出错了</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们不应当让swagger生成的server主导我们的业务 所以每一个swagger的server的codegenerstor都应该是自己手写的 client的话用swager就好不用那么麻烦了</p>\n<h1>reference</h1>\n<p>swagger的prptocol允许我们在yaml中定义引用 在上面的例子中每个schema下面的部分我们时直接写出来的 但是 实际上可以把他抽出来单独定义 便于 复用 和保持抽象浓度</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">etc\netc\n      <span class=\"token key atrule\">responses</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">'200'</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"alla\"</span>\n          <span class=\"token key atrule\">content</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">application/json</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">schema</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> array\n                <span class=\"token key atrule\">items</span><span class=\"token punctuation\">:</span> \n                  <span class=\"token key atrule\">$ref</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#/components/schemas/a\"</span>\n          \n        <span class=\"token key atrule\">default</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"error\"</span>\n<span class=\"token key atrule\">components</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">schemas</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">a</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">properties</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> integer\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> string</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","fields":{"slug":"/cube/swagger/","disqus":{"shortname":"woodgear-blog"}},"frontmatter":{"id":"1nfevxp","time":"1996-09-08T23:37:07+08:00","tag":null},"parent":{"__typename":"File","name":"swagger","ext":".md","birthTime":"1970-01-01T00:00:00.000Z","changeTime":"2020-11-26T15:05:48.114Z","relativeDirectory":"cube","absolutePath":"/home/oaa/sm/ns/share/blog/cube/swagger.md"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/cube/swagger/","disqus":{"shortname":"woodgear-blog"}}}