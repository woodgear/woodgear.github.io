{"componentChunkName":"component---src-templates-blog-post-js","path":"/cube/windows-bat/","result":{"data":{"markdownRemark":{"html":"<h1>cwd</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">rem current exe dir\nset CED=%~dp0 </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h1>md5</h1>\n<div class=\"gatsby-highlight\" data-language=\"bat\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bat line-numbers\"><code class=\"language-bat\">certUtil -hashfile ${file} MD5</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1>check err,err handle'</h1>\n<p><a href=\"https://stackoverflow.com/a/51897403/5642024\"></a></p>\n<div class=\"gatsby-highlight\" data-language=\"bat\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bat line-numbers\"><code class=\"language-bat\">rem 第一种 每次执行完检查\nif %errorlevel% neq 0 exit /b %errorlevel%\nrem 第二种\nrem 1.在文件开头设置\nSETLOCAL EnableDelayedExpansion\nrem 2. 如果coommand-1 失败 整个脚本失败\ncommand-1 ||  (echo &quot;sth err&quot; &amp;&amp; exit /b !ERRORLEVEL!)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>sleep</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\"># sleep 3s\nping -n 3 127.0.0.1 &gt;nul</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h1>单行命令换行</h1>\n<div class=\"gatsby-highlight\" data-language=\"bat\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bat line-numbers\"><code class=\"language-bat\">echo one ^\ntwo ^\n*\nrem one two *\n\necho one &amp; echo two\nrem one\nrem two\n\necho one &amp; ^\necho two\nrem one\nrem two\n\necho one ^\n&amp; echo two\nrem one &amp; echo two</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><a href=\"https://stackoverflow.com/questions/69068/split-long-commands-in-multiple-lines-through-windows-batch-file\">ref</a></p>\n<h1>args</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">%0 - the command used to call the batch file (could be foo, ..\\foo, c:\\bats\\foo.bat, etc.)\n%1 is the first command line parameter,\n%2 is the second command line parameter,\nand so on till %9 (and SHIFT can be used for those after the 9th).\n\n%~nx0 - the actual name of the batch file, regardless of calling method (some-batch.bat)\n%~dp0 - drive and path to the script (d:\\scripts)\n%~dpnx0 - is the fully qualified path name of the script (d:\\scripts\\some-batch.bat)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><a href=\"https://stackoverflow.com/questions/357315/get-list-of-passed-arguments-in-windows-batch-script-bat\">ref</a></p>\n<h1>rm -rf</h1>\n<p>@RD /S /Q %path%</p>\n<h1>mkdir</h1>\n<p>mkdir</p>\n<h1>define-var 变量</h1>\n<div class=\"gatsby-highlight\" data-language=\"bat\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bat line-numbers\"><code class=\"language-bat\"># 注意=号左边不能有空格 右边的空格会被看做变量值的一部分\nset A=&quot;1 2 3&quot;\nset B= 1 2 3\nset C=1 2 3\nset C=123\n\n# %NAME% 来使用变量\necho %A%\necho %B%\necho %C%</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bat\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bat line-numbers\"><code class=\"language-bat\">&quot;1 2 3&quot;\n 1 2 3\n1 2 3\n123</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>copy</h1>\n<p><a href=\"https://stackoverflow.com/questions/986447/batch-file-to-copy-files-from-one-folder-to-another-folder\">xcopy</a>\nxcopy /y .\\a.txt C:\\b\\b.txt</p>\n<h2>target is file or directory</h2>\n<p>echo f | xcopy /y .\\a.txt C:\\b\\b.txt</p>\n<h1>query porcoess by name</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">TASKLIST /FI &quot;IMAGENAME eq explorer.exe&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1>命令行空格转义</h1>\n<p>一个引号=>三个引号</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">cmd /c &quot;TASKLIST /FI &quot;&quot;&quot;IMAGENAME eq explorer.exe&quot;&quot;&quot; &quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1>net copy from samba</h1>\n<p>copy 时有可能会报错 是因为没有net use,使用net use 时也可能报错 因为之前错误的use过了 此时需要的是 列出所有的net 然后删除那些出问题的</p>\n<div class=\"gatsby-highlight\" data-language=\"bat\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bat line-numbers\"><code class=\"language-bat\">net use \\\\IP\\shared /user:USER PASSWD\nnet use rem 列出所有\nnet use \\\\IP /del rem 删除</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h1>如何快速的打开 Start Up 目录</h1>\n<p>win+r shell:startup</p>\n<h1>kill process which listening port</h1>\n<p>netstat -ano | findstr :yourPortNumber\ntaskkill /PID typeyourPIDhere /F</p>\n<h1>取消登录密码</h1>\n<p>netplwiz run as admin cancle user must enter passed etc ...</p>\n<h1>检查进程权限</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">accesschk.exe -vqp cmd</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><a href=\"https://docs.microsoft.com/en-us/sysinternals/downloads/accesschk\">accesschk</a></p>\n<h1>检查进程是否存在</h1>\n<div class=\"gatsby-highlight\" data-language=\"bat\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bat line-numbers\"><code class=\"language-bat\">tasklist /FI &quot;IMAGENAME eq myapp.exe&quot; </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1>查看服务信息</h1>\n<div class=\"gatsby-highlight\" data-language=\"ps\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ps line-numbers\"><code class=\"language-ps\"> gwmi -Query &quot;select Name,PathName from Win32_Service where PathName like &#39;%venus%&#39;&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1>进入到回收站</h1>\n<h1>拷贝文件名</h1>\n<p>资源管理器 选择文件 按住shift 右键菜单中有copy as path</p>\n<h1>清空dns cache</h1>\n<p> ipconfig /flushdns</p>\n<h1>查看dll</h1>\n<p>dumpbin </p>\n<h1>设置环境变量</h1>\n<p><a href=\"https://www.programmersought.com/article/71752026181/\">wmic-env</a>\n<a href=\"https://www.cnblogs.com/killerlegend/p/3405484.html\"></a></p>\n<div class=\"gatsby-highlight\" data-language=\"bat\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bat line-numbers\"><code class=\"language-bat\">rem 好像没有upsert的语法 所以先delete 再create\n\nrem Change the path environment variable values\nwmic ENVIRONMENT where &quot;name=&#39;path&#39; and username=&#39;&lt;system&gt;&#39;&quot; set VariableValue=&quot;%path%;e:\\tools&quot;\nrem Add system environment variables \nwmic ENVIRONMENT create name=&quot;home&quot;,username=&quot;&lt;system&gt;&quot;,VariableValue=&quot;%HOMEDRIVE%%HOMEPATH%&quot;\nrem  Delete the environment variable\nwmic ENVIRONMENT where &quot;name=&#39;home&#39;&quot; delete\nrem set (create or update) env\nwmic ENVIRONMENT set name=&quot;CUSTOM_EXE_DIR&quot;,username=&quot;&lt;system&gt;&quot;,VariableValue=&quot;E:\\sm\\scripts&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>更新环境变量</h1>\n<p><a href=\"https://github.com/chocolatey/choco/blob/master/src/chocolatey.resources/redirects/RefreshEnv.cmd\">https://github.com/chocolatey/choco/blob/master/src/chocolatey.resources/redirects/RefreshEnv.cmd</a></p>","fields":{"slug":"/cube/windows-bat/","disqus":{"shortname":"woodgear-blog"}},"frontmatter":{"id":"kvawytt","time":"2019-05-05T11:28:47+08:00","tag":null},"parent":{"__typename":"File","name":"windows-bat","ext":".md","birthTime":"2020-03-21T15:26:01.739Z","changeTime":"2020-08-17T01:18:35.589Z","relativeDirectory":"cube","absolutePath":"C:/Users/18754/ns/share/blog/cube/windows-bat.md"}}},"pageContext":{"slug":"/cube/windows-bat/","disqus":{"shortname":"woodgear-blog"}}},"staticQueryHashes":["68354608"]}